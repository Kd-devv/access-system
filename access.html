<!DOCTYPE html>
<html lang="sq">
<head>
  <meta charset="UTF-8" />
  <title>Hyrja me PIN</title>
  <style>
    body {
      display: flex; justify-content: center; align-items: center;
      height: 100vh; background-color: #222; color: white;
      font-family: sans-serif; flex-direction: column;
    }
    input {
      padding: 1rem; font-size: 1.5rem; border: none;
      border-radius: 10px; text-align: center; width: 200px;
    }
    button {
      margin-top: 1rem; padding: 1rem 2rem; font-size: 1.2rem;
      background-color: #28a745; color: white; border: none;
      border-radius: 10px; cursor: pointer;
    }
    #msg { margin-top: 1rem; font-size: 1.2rem; }
  </style>
</head>
<body>
  <input id="pin" type="password" placeholder="Fus PIN-in" maxlength="4" />
  <button onclick="dergoPin()">Hap Derën</button>
  <div id="msg"></div>

  <script>
    async function dergoPin() {
      const pin = document.getElementById("pin").value.trim();
      const msg = document.getElementById("msg");

      if (!pin) {
        msg.textContent = "Ju lutem fusni PIN-in.";
        msg.style.color = "orange";
        return;
      }

      msg.textContent = "⏳ Po kontrollohet...";
      msg.style.color = "white";

      try {
        const res = await fetch("https://porta.armnis76.workers.dev", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          mode: "cors",
          body: JSON.stringify({ pin })
        });

        const text = await res.text();
        msg.textContent = text;
        msg.style.color = res.ok ? "lightgreen" : "orange";

      } catch (err) {
        msg.textContent = "❌ Gabim në rrjet.";
        msg.style.color = "red";
      }
    }
  </script>
</body>
</html>
